{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchSearchData(inputValue, currentPage) {\n  const searchParam = {\n    params: {\n      key: '43344666-8172f6ac72992b92fe58b4040',\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: currentPage,\n    },\n  };\n  const response = await axios.get('https://pixabay.com/api/', searchParam);\n  return response;\n}","export function renderElements(images) {\n  return images\n    .map(img => {\n      return `<li class=\"gallery-item\">\n  <a href=\"${img.largeImageURL}\"\n    ><img src=\"${img.webformatURL}\" alt=\"${img.tags}\" class=\"photo\"\n  /></a>\n  <div class=\"gallery-item-container\">\n<div class=\"label-container\"><span class=\"label\">Likes</span><span class=\"value\">${img.likes}</span></div>\n    <div class=\"label-container\"><span class=\"label\">Views</span><span class=\"value\">${img.views}</span></div>\n    <div class=\"label-container\"><span class=\"label\">Comments</span><span class=\"value\">${img.comments}</span></div>\n    <div class=\"label-container\"><span class=\"label\">Downloads</span><span class=\"value\">${img.downloads}</span></div>\n  </div>\n</li>`;\n    })\n    .join('');\n}","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchSearchData } from './js/pixabay-api';\nimport { renderElements } from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadBtnEl = document.querySelector('.button-load');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 500,\n});\nlet currentPage = null;\nlet inputValue = null;\n\nloadBtnEl.addEventListener('click', onLoadBtnClick);\n\nformEl.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(event) {\n  try {\n    event.preventDefault();\n    currentPage = 1;\n\n    galleryEl.innerHTML = '';\n\n    inputValue = event.target.elements.js_input.value.trim();\n\n    if (inputValue === '') {\n      loadBtnEl.classList.remove('is-visible');\n\n      return;\n    }\n\n    loaderEl.classList.add('is-visible');\n    loadBtnEl.classList.remove('is-visible');\n\n    const result = await fetchSearchData(inputValue, currentPage);\n    if (result.data.hits.length === 0) {\n      loaderEl.classList.remove('is-visible');\n\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      galleryEl.innerHTML = '';\n      return;\n    }\n\n    loaderEl.classList.remove('is-visible');\n\n    galleryEl.innerHTML = renderElements(result.data.hits);\n    lightbox.refresh();\n\n    if (\n      result.data.totalHits <=\n      result.config.params.page * result.config.params.per_page\n    ) {\n      loaderEl.classList.remove('is-visible');\n      iziToast.info({\n        message:\n          'We are sorry, but you have reached the end of search results.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    loadBtnEl.classList.add('is-visible');\n\n    // console.log(result);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onLoadBtnClick(event) {\n  const galleryItemEl = document.querySelector('.gallery-item');\n  const domRect = galleryItemEl.getBoundingClientRect();\n  const innerHeight = domRect.height * 2;\n\n  currentPage++;\n\n  loadBtnEl.classList.remove('is-visible');\n  loaderEl.classList.add('is-visible');\n\n  const result = await fetchSearchData(inputValue, currentPage);\n  galleryEl.insertAdjacentHTML('beforeend', renderElements(result.data.hits));\n\n  lightbox.refresh();\n\n  window.scrollBy({\n    top: innerHeight,\n    behavior: 'smooth',\n  });\n\n  loaderEl.classList.remove('is-visible');\n  loadBtnEl.classList.add('is-visible');\n\n  if (\n    result.data.totalHits <=\n    result.config.params.page * result.config.params.per_page\n  ) {\n    loadBtnEl.classList.remove('is-visible');\n\n    iziToast.info({\n      message: 'We are sorry, but you have reached the end of search results.',\n      position: 'topRight',\n    });\n  }\n}"],"names":["fetchSearchData","inputValue","currentPage","searchParam","axios","renderElements","images","img","formEl","galleryEl","loaderEl","loadBtnEl","lightbox","SimpleLightbox","onLoadBtnClick","onFormSubmit","event","result","iziToast","error","innerHeight"],"mappings":"owBAEO,eAAeA,EAAgBC,EAAYC,EAAa,CAC7D,MAAMC,EAAc,CAClB,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACP,CACL,EAEE,OADiB,MAAME,EAAM,IAAI,2BAA4BD,CAAW,CAE1E,CChBO,SAASE,EAAeC,EAAQ,CACrC,OAAOA,EACJ,IAAIC,GACI;AAAA,aACAA,EAAI,aAAa;AAAA,iBACbA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,mFAGgCA,EAAI,KAAK;AAAA,uFACLA,EAAI,KAAK;AAAA,0FACNA,EAAI,QAAQ;AAAA,2FACXA,EAAI,SAAS;AAAA;AAAA,MAGnG,EACA,KAAK,EAAE,CACZ,CCJA,MAAMC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EACD,IAAIX,EAAc,KACdD,EAAa,KAEjBU,EAAU,iBAAiB,QAASG,CAAc,EAElDN,EAAO,iBAAiB,SAAUO,CAAY,EAE9C,eAAeA,EAAaC,EAAO,CACjC,GAAI,CAQF,GAPAA,EAAM,eAAc,EACpBd,EAAc,EAEdO,EAAU,UAAY,GAEtBR,EAAae,EAAM,OAAO,SAAS,SAAS,MAAM,OAE9Cf,IAAe,GAAI,CACrBU,EAAU,UAAU,OAAO,YAAY,EAEvC,MACD,CAEDD,EAAS,UAAU,IAAI,YAAY,EACnCC,EAAU,UAAU,OAAO,YAAY,EAEvC,MAAMM,EAAS,MAAMjB,EAAgBC,EAAYC,CAAW,EAC5D,GAAIe,EAAO,KAAK,KAAK,SAAW,EAAG,CACjCP,EAAS,UAAU,OAAO,YAAY,EAEtCQ,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EAEDT,EAAU,UAAY,GACtB,MACD,CAOD,GALAC,EAAS,UAAU,OAAO,YAAY,EAEtCD,EAAU,UAAYJ,EAAeY,EAAO,KAAK,IAAI,EACrDL,EAAS,QAAO,EAGdK,EAAO,KAAK,WACZA,EAAO,OAAO,OAAO,KAAOA,EAAO,OAAO,OAAO,SACjD,CACAP,EAAS,UAAU,OAAO,YAAY,EACtCQ,EAAS,KAAK,CACZ,QACE,gEACF,SAAU,UAClB,CAAO,EACD,MACD,CAEDP,EAAU,UAAU,IAAI,YAAY,CAGrC,OAAQQ,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAEA,eAAeL,EAAeE,EAAO,CAGnC,MAAMI,EAFgB,SAAS,cAAc,eAAe,EAC9B,wBACF,OAAS,EAErClB,IAEAS,EAAU,UAAU,OAAO,YAAY,EACvCD,EAAS,UAAU,IAAI,YAAY,EAEnC,MAAMO,EAAS,MAAMjB,EAAgBC,EAAYC,CAAW,EAC5DO,EAAU,mBAAmB,YAAaJ,EAAeY,EAAO,KAAK,IAAI,CAAC,EAE1EL,EAAS,QAAO,EAEhB,OAAO,SAAS,CACd,IAAKQ,EACL,SAAU,QACd,CAAG,EAEDV,EAAS,UAAU,OAAO,YAAY,EACtCC,EAAU,UAAU,IAAI,YAAY,EAGlCM,EAAO,KAAK,WACZA,EAAO,OAAO,OAAO,KAAOA,EAAO,OAAO,OAAO,WAEjDN,EAAU,UAAU,OAAO,YAAY,EAEvCO,EAAS,KAAK,CACZ,QAAS,gEACT,SAAU,UAChB,CAAK,EAEL"}